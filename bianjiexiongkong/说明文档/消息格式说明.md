# ROS2 Msg 定义

## HeadTracking.msg - 头动跟踪（对外输出）

```msg
std_msgs/Header header
# 欧拉角采用弧度制 (符合ROS惯例)
float32 yaw    # [-2π, 2π]  航向角支持连续转头
float32 pitch  # [-π/2, π/2] 俯仰角
bool is_tracking  # 状态指示器 0表示未开启跟踪，1表示开启跟踪
float32 confidence  # [0, 1] 置信度 (0表示无效)
```

## VoiceText.msg - 语音文本（对外输出）

```msg
std_msgs/Header header
# 语音识别结果
string raw_text         # 原始识别文本(中文、英文、数字等，不超过100个字符)
bool is_final           # 是否为最终结果 (true=最终, false=中间结果)
float32 confidence      # 整个文本的置信度 [0, 1]
```

## VoiceCommand.msg - 语音指令  （对外输出）

```msg
std_msgs/Header header
# 语音指令
uint16 frame_header      # 前8位为分类码（Category）后8位为操作码（Operation），构成： (Category << 8) | Operation
uint32 command_id        # 指令唯一ID 
int32 param1             # 参数 1 (使用缩放因子后的整数值，例如温度×10，纬度×1e7等)
int32 param2             # 参数 2 (使用缩放因子后的整数值，例如经度×1e7等)
uint8 param3             # 参数 3 (模式、开关、档位、查询子项等)
# 命令有效性
bool is_valid            # 是否有效命令 (由解析节点设置，0 无效 1 有效)
```


## VideoSource.msg - 视频源信息 （从车辆接收、也可能预设好）

```msg
std_msgs/Header header
# 唯一标识符 (用于前端绑定)
uint8 id
string ip_address       # IP地址
string source_name      # 显示名称
uint32 fps              # 帧率
uint32 width            # 分辨率宽
uint32 height           # 分辨率高
string encoding         # 编码格式 (e.g. "h264", "h265")
bool is_available       # 是否可用
```

## EquipmentState.msg - 车辆状态信息（从车辆接收）

```msg
std_msgs/Header header
# EquipmentState.msg

# 车辆核心状态
float64 longitude        # 经度(WGS84)
float64 latitude         # 纬度(WGS84)
float64 altitude         # 海拔(米)
float32 heading          # 朝向(弧度，0为正北)
float32 speed            # 车速(km/h)
float32 fuel_level       # 油量(0.0-1.0)
float32 battery_level    # 电量(0.0-1.0)

# 车辆姿态 (三轴弧度)
float32 roll             # 横滚角(弧度)
float32 pitch            # 俯仰角(弧度)
float32 yaw              # 偏航角(弧度)

# 弹药状态 (动态类型/数量)
string[] ammo_types      # 弹药类型 ["穿甲弹", "高爆弹", ...]
uint8[] ammo_counts      # 对应数量 [数量1, 数量2, ...]

# 光电转台状态 (弧度制)
float32 gimbal_pitch     # 俯仰角(弧度)
float32 gimbal_yaw       # 方位角(弧度)
bool gimbal_is_active    # 转台是否激活

# 告警系统
string[] warnings        # 当前活动告警 ["引擎过热", "电池低电量", ...]

# 通用状态容器 (保留扩展性)
string[] state_names     # 其他状态名称
float32[] state_values   # 对应数值
```

## ButtonState.msg - 按键状态（内部使用）

```msg
std_msgs/Header header
# 侧按键1：头动开关
bool head_tracking_enabled
# 侧按键2：语音开关
bool voice_command_enabled
# 正按键1：正面屏开关
bool front_screen_enabled
# 正按键2：正面屏显示模式 (语义化枚举)
uint8 front_screen_mode
uint8 FRONT_SCREEN_DEFAULT=0
uint8 FRONT_SCREEN_MODE_A=1
uint8 FRONT_SCREEN_MODE_B=2
uint8 FRONT_SCREEN_MODE_C=3
# 正按键3：头显视频源 (索引)
uint8 hmd_video_source # 选中的视频源索引
# 正按键4：头显叠加模式 (语义化枚举)
uint8 hmd_overlay_mode
uint8 HMD_OVERLAY_NONE=0
uint8 HMD_OVERLAY_MINIMAL=1
uint8 HMD_OVERLAY_FULL=2
# 正按键5：头显开关
bool hmd_enabled
```
